package DGU;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

// 과일 정보를 저장하는 클래스
class Fruits {
    private String name; // 과일의 이름
    private int price; // 과일의 가격
    private ImageIcon image; // 과일의 이미지

    // 생성자: 과일 이름과 가격을 받아 객체를 생성
    Fruits(String n, int p) {
        name = n;
        price = p;
        image = new ImageIcon("c:\\Q202\\images\\" + name + ".png");
    }

    // 과일 이름을 반환하는 메소드
    String getFName() {
        return name;
    }

    // 과일 가격을 반환하는 메소드
    int getFPrice() {
        return price;
    }

    // 과일 이미지를 반환하는 메소드
    ImageIcon getImage() {
        return image;
    }
}

// 메인 프레임 클래스
public class Grade_2019111679_022_2 extends JFrame {
    private int w, h; // 프레임의 가로, 세로 크기
    private Container c = getContentPane(); // 컨테이너
    private ArrayList<Fruits> fruitsList = new ArrayList<>(); // 과일 리스트

    public Grade_2019111679_022_2() {
        w = 300;
        h = 300;
        setTitle("확장"); // 제목 설정
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); // 닫기 버튼 동작 설정
        c.add(new Panel1(this), BorderLayout.CENTER); // 첫 번째 패널 추가
        setSize(w, h); // 크기 설정
        setVisible(true); // 보이기 설정
    }

    // 패널 변경 메소드
    public void changePanel(JPanel panel) {
        c.removeAll(); // 모든 컴포넌트 제거
        c.add(panel, BorderLayout.CENTER); // 새 패널 추가
        c.revalidate(); // 레이아웃 갱신
        c.repaint(); // 다시 그리기
    }

    // 과일 리스트 반환 메소드
    public ArrayList<Fruits> getFruitsList() {
        return fruitsList;
    }

    public static void main(String[] args) {
        new Grade_2019111679_022_2(); // 인스턴스 생성
    }
}

// 첫 번째 패널 클래스
class Panel1 extends JPanel {
    // 생성자: 프레임을 매개변수로 받아 초기화
    Panel1(final Grade_2019111679_022_2 frame) {
        setLayout(new GridLayout(3, 1)); // 그리드 레이아웃 설정
        add(new JLabel("과일의 개수를 입력하세요")); // 레이블 추가

        final JTextField numberField = new JTextField(); // 텍스트 필드 생성
        add(numberField); // 텍스트 필드 추가

        JButton confirmButton = new JButton("확인"); // 확인 버튼 생성
        confirmButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                int size = Integer.parseInt(numberField.getText()); // 입력된 개수 가져오기
                frame.changePanel(new Panel2(frame, size)); // 두 번째 패널로 변경
            }
        });
        add(confirmButton); // 버튼 추가
    }
}

//두 번째 패널 클래스
class Panel2 extends JPanel {
 private ArrayList<JTextField> nameFields = new ArrayList<>(); // 과일 이름 입력 필드 리스트
 private ArrayList<JTextField> priceFields = new ArrayList<>(); // 과일 가격 입력 필드 리스트
 private JPanel fieldsPanel; // 필드들을 담을 패널

 Panel2(final Grade_2019111679_022_2 frame, int initialSize) {
     setLayout(new BorderLayout()); // 패널 레이아웃 설정

     fieldsPanel = new JPanel();
     fieldsPanel.setLayout(new GridLayout(0, 2)); // 필드 패널 레이아웃 설정
     JScrollPane scrollPane = new JScrollPane(fieldsPanel); // 스크롤 가능한 패널 추가

     for (int i = 0; i < initialSize; i++) {
         addFruitField(); // 초기 과일 필드 추가
     }

     // 과일 추가 버튼 설정
     JButton addButton = new JButton("과일 추가");
     addButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
             addFruitField(); // 과일 필드 추가
         }
     });

     // 과일 제거 버튼 설정
     JButton removeButton = new JButton("과일 제거");
     removeButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
             removeFruitField(); // 과일 필드 제거
         }
     });

     // 확인 버튼 설정
     JButton confirmButton = new JButton("확인");
     confirmButton.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent e) {
             frame.getFruitsList().clear(); // 기존 리스트 클리어
             for (int i = 0; i < nameFields.size(); i++) {
                 String name = nameFields.get(i).getText(); // 이름 읽기
                 int price;
                 try {
                     price = Integer.parseInt(priceFields.get(i).getText()); // 가격 읽기
                 } catch (NumberFormatException nfe) {
                     price = 0; // 형식 오류 처리
                 }
                 frame.getFruitsList().add(new Fruits(name, price)); // 리스트에 추가
             }
             frame.changePanel(new Panel3(frame.getFruitsList())); // 세 번째 패널로 변경
         }
     });

     // 버튼 패널 추가
     JPanel buttonPanel = new JPanel();
     buttonPanel.add(addButton);
     buttonPanel.add(removeButton);
     buttonPanel.add(confirmButton);

     add(scrollPane, BorderLayout.CENTER); // 스크롤 패널 추가
     add(buttonPanel, BorderLayout.SOUTH); // 버튼 패널 추가
 }

 private void addFruitField() {
     // 과일 이름 및 가격 입력 필드 추가 로직
 }

 private void removeFruitField() {
     // 과일 필드 제거 로직
 }
}

//세 번째 패널 클래스
class Panel3 extends JPanel {
 private JLabel showImage; // 이미지를 표시할 레이블
 private JLabel showPrice; // 가격을 표시할 레이블

 Panel3(ArrayList<Fruits> fruits) {
     setLayout(new BorderLayout()); // 패널 레이아웃 설정
     JPanel radioPanel = new JPanel(new GridLayout(1, 0)); // 라디오 버튼 패널 설정
     ButtonGroup group = new ButtonGroup(); // 버튼 그룹 생성
     showImage = new JLabel("", SwingConstants.CENTER); // 이미지 레이블 초기화
     showPrice = new JLabel("과일을 선택하세요.", SwingConstants.CENTER); // 가격 레이블 초기화

     for (Fruits fruit : fruits) {
         JRadioButton button = new JRadioButton(fruit.getFName()); // 라디오 버튼 생성
         button.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e) {
                 ImageIcon icon = fruit.getImage(); // 이미지 가져오기
                 // 이미지 크기 변환 및 표시 로직
             }
         });
         group.add(button); // 그룹에 버튼 추가
         radioPanel.add(button); // 패널에 버튼 추가
     }

     // 스크롤 패널 및 이미지, 가격 레이블 추가 로직
 }
}
